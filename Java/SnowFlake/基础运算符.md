## 位运算

当我们进行移位操作时，我们将二进制数的位向左或向右移动。这个操作可以通过使用位运算符来实现。在Java中，有两种类型的移位运算符：左移运算符（<<）和右移运算符（>>）。

左移运算符（<<）将一个二进制数的所有位向左移动指定的位数。例如，对于二进制数1010，如果我们将其左移2位（1010 << 2），结果将是101000，相当于将原数乘以2的2次方。

右移运算符（>>）将一个二进制数的所有位向右移动指定的位数。右移操作可以分为两种类型：逻辑右移和算术右移。

* 逻辑右移（>>>）将二进制数的所有位向右移动，并用0填充左侧的空位。例如，对于二进制数1010，如果我们将其逻辑右移2位（1010 >>> 2），结果将是0010，左侧的两个空位被填充为0。
* 算术右移（>>)）将二进制数的所有位向右移动，并用原符号位填充左侧的空位。例如，对于二进制数1010，如果我们将其算术右移2位（1010 >> 2），结果将是1110，左侧的两个空位被填充为符号位1。

在给定的代码中，使用了左移操作（\<\<）和取反操作（）。首先，-1表示为二进制的全1，即所有位都为1的数。通过对-1进行左移操作，可以创建一个二进制全为1的数。然后，通过对这个数进行取反操作（），将其转换为二进制全为0的数。最终得到的结果就是从0到最大工作人员ID的取值范围。

**雪花算法实践**

~(-1 << workerIdBits)，将 -1 进行左移，然后取反。-1 在计算机中以补码方式存储，也就是1111111，假如左移 10 位，右侧就会补 10 个零，也就是10000000000，然后再取反获取到的值为 01111111111

在计算机中，负数以补码方式存储，正数以原码方式存储。

所以 01111111111 所表示的最大值为 2^10 - 1 也就是 1023。所以 workerId 的取值范围为 0-1023。

## 与或异或运算

*  **&amp;：与运算**

  计算方式为 1 & 1 = 1；1 & 0 = 0；0 & 1 = 0；0 & 0 = 0；

  总结：两者同为1时，结果才会1，否则为0

*  **|：或运算**

  计算方式为 1 | 1 = 1；1 | 0 = 1；0 | 1 = 1；0 | 0 = 0；

  总结：参与运算的两个值只要有1，结果就为1，否则为0

*  **^：异或运算**

  计算方式为 1 ^ 1 = 0；1 ^ 0 = 1；0 ^ 1 = 1；0 ^ 0 = 0；

  总结：参与运算的两个值，只要值不相同，结果为1，否则为0

*  **~：取反运算**

  计算方式为 ~(1) = 0; ~(0) = 1;

  总结：对一个二进制的值进行取反，即0转1，1转0；

‍

‍
